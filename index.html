<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Alfred-workflow : Ruby Gem helper for building Alfred workflow." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Alfred-workflow</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/zhaocai/alfred-workflow">View on GitHub</a>

          <h1 id="project_title">Alfred-workflow</h1>
          <h2 id="project_tagline">Ruby Gem helper for building Alfred workflow.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/zhaocai/alfred-workflow/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/zhaocai/alfred-workflow/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="alfred-workflow-" class="anchor" href="#alfred-workflow-"><span class="octicon octicon-link"></span></a>alfred-workflow <a href="https://travis-ci.org/zhaocai/alfred-workflow"><img src="https://travis-ci.org/zhaocai/alfred-workflow.png?branch=master" alt="Build Status"></a>
</h1>

<ul>
<li>home  :: <a href="http://zhaocai.github.com/alfred2-ruby-template/">http://zhaocai.github.com/alfred2-ruby-template/</a>
</li>
<li>rdoc  :: <a href="http://rubydoc.info/gems/alfred-workflow/">http://rubydoc.info/gems/alfred-workflow/</a>
</li>
<li>code  :: <a href="https://github.com/zhaocai/alfred-workflow">https://github.com/zhaocai/alfred-workflow</a>
</li>
<li>bugs  :: <a href="https://github.com/zhaocai/alfred-workflow/issues">https://github.com/zhaocai/alfred-workflow/issues</a>
</li>
</ul><h2>
<a name="description" class="anchor" href="#description"><span class="octicon octicon-link"></span></a>DESCRIPTION:</h2>

<p>alfred-workflow is a ruby Gem helper for building <a href="http://www.alfredapp.com">Alfred</a> workflow.</p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>FEATURES:</h2>

<ul>
<li>Use standard <a href="http://gembundler.com/">bundler</a> to easily package, manage, and update ruby gems in the workflow.</li>
<li>Friendly exception and debug output to the Mac OS X Console.</li>
<li>Automate saving and loading cached feedback</li>
<li>Automate rescue feedback items to alfred when something goes wrong.</li>
<li>Functions to easily load and save user configuration (in YAML)</li>
<li>Functions for smart case query filter of feedback results.</li>
<li>Functions for finding the bundle ID, cache and storage paths, and query arguments.</li>
<li>Functions for reading and writing plist files.</li>
<li>Functions to simplify generating feedback XML for Alfred.</li>
</ul><h2>
<a name="install" class="anchor" href="#install"><span class="octicon octicon-link"></span></a>INSTALL:</h2>

<p><code>gem install alfred-workflow</code></p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>USAGE:</h2>

<ul>
<li><p>Refer to <a href="https://github.com/zhaocai/alfred2-ruby-template">alfred2-ruby-template</a> for examples and detailed instruction. Also refer to some of the example projects:</p></li>
<li><p><a href="https://github.com/zhaocai/alfred2-top-workflow">alfred2-top-workflow</a></p></li>
<li><p><a href="https://github.com/zhaocai/alfred2-google-workflow">alfred2-google-workflow</a></p></li>
<li><p><a href="https://github.com/zhaocai/alfred2-keylue-workflow">alfred2-keylue-workflow</a></p></li>
<li><p><a href="https://github.com/zhaocai/alfred2-sourcetree-workflow">alfred2-sourcetree-workflow</a></p></li>
</ul><h2>
<a name="synopsis" class="anchor" href="#synopsis"><span class="octicon octicon-link"></span></a>SYNOPSIS:</h2>

<h3>
<a name="the-basic" class="anchor" href="#the-basic"><span class="octicon octicon-link"></span></a>The Basic</h3>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'rubygems'</span> <span class="k">unless</span> <span class="n">defined?</span> <span class="no">Gem</span>
<span class="nb">require</span> <span class="s2">"bundle/bundler/setup"</span>
<span class="nb">require</span> <span class="s2">"alfred"</span>

<span class="no">Alfred</span><span class="o">.</span><span class="n">with_friendly_error</span> <span class="k">do</span> <span class="o">|</span><span class="n">alfred</span><span class="o">|</span>
  <span class="n">fb</span> <span class="o">=</span> <span class="n">alfred</span><span class="o">.</span><span class="n">feedback</span>

  <span class="n">fb</span><span class="o">.</span><span class="n">add_file_item</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">expand_path</span> <span class="s2">"~/Applications/"</span><span class="p">)</span>

  <span class="nb">puts</span> <span class="n">fb</span><span class="o">.</span><span class="n">to_alfred</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>

<p>Code are wrapped in <code>Alfred.with_friendly_error</code> block. Exceptions and debug messages are logged to Console log file <strong>~/Library/Logs/Alfred-Workflow.log</strong>.</p>

<h3>
<a name="with-rescue-feedback-automatically-generated" class="anchor" href="#with-rescue-feedback-automatically-generated"><span class="octicon octicon-link"></span></a>With rescue feedback automatically generated!</h3>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'rubygems'</span> <span class="k">unless</span> <span class="n">defined?</span> <span class="no">Gem</span>
<span class="nb">require</span> <span class="s2">"bundle/bundler/setup"</span>
<span class="nb">require</span> <span class="s2">"alfred"</span>

<span class="k">def</span> <span class="nf">my_code_with_something_goes_wrong</span>
  <span class="kp">true</span>
<span class="k">end</span>

<span class="no">Alfred</span><span class="o">.</span><span class="n">with_friendly_error</span> <span class="k">do</span> <span class="o">|</span><span class="n">alfred</span><span class="o">|</span>
  <span class="n">alfred</span><span class="o">.</span><span class="n">with_rescue_feedback</span> <span class="o">=</span> <span class="kp">true</span>

  <span class="n">fb</span> <span class="o">=</span> <span class="n">alfred</span><span class="o">.</span><span class="n">feedback</span>

  <span class="k">if</span> <span class="n">my_code_with_something_goes_wrong</span>
    <span class="k">raise</span> <span class="ss">Alfred</span><span class="p">:</span><span class="ss">:NoBundleIDError</span><span class="p">,</span> <span class="s2">"Wrong Bundle ID Test!"</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p><img src="https://raw.github.com/zhaocai/alfred2-ruby-template/master/screenshots/rescue%20feedback.png" alt=""></p>

<h3>
<a name="automate-saving-and-loading-cached-feedback" class="anchor" href="#automate-saving-and-loading-cached-feedback"><span class="octicon octicon-link"></span></a>Automate saving and loading cached feedback</h3>

<div class="highlight highlight-ruby"><pre><span class="nb">require</span> <span class="s1">'rubygems'</span> <span class="k">unless</span> <span class="n">defined?</span> <span class="no">Gem</span>
<span class="nb">require</span> <span class="s2">"bundle/bundler/setup"</span>
<span class="nb">require</span> <span class="s2">"alfred"</span>

<span class="no">Alfred</span><span class="o">.</span><span class="n">with_friendly_error</span> <span class="k">do</span> <span class="o">|</span><span class="n">alfred</span><span class="o">|</span>
  <span class="n">alfred</span><span class="o">.</span><span class="n">with_rescue_feedback</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">alfred</span><span class="o">.</span><span class="n">with_cached_feedback</span> <span class="k">do</span>
    <span class="c1"># expire in 1 hour</span>
    <span class="n">use_cache_file</span> <span class="ss">:expire</span> <span class="o">=&gt;</span> <span class="mi">3600</span>
    <span class="c1"># use_cache_file :file =&gt; "/path/to/your/cache_file", :expire =&gt; 3600</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">fb</span> <span class="o">=</span> <span class="n">alfred</span><span class="o">.</span><span class="n">feedback</span><span class="o">.</span><span class="n">get_cached_feedback</span>
    <span class="c1"># cached feedback is valid</span>
    <span class="nb">puts</span> <span class="n">fb</span><span class="o">.</span><span class="n">to_alfred</span>
  <span class="k">else</span> 
    <span class="n">fb</span> <span class="o">=</span> <span class="n">alfred</span><span class="o">.</span><span class="n">feedback</span>
    <span class="c1"># ... generate_feedback as usually</span>
    <span class="n">fb</span><span class="o">.</span><span class="n">put_cached_feedback</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<h3>
<a name="customize-feedback-item-matcher" class="anchor" href="#customize-feedback-item-matcher"><span class="octicon octicon-link"></span></a>Customize feedback item matcher</h3>

<div class="highlight highlight-ruby"><pre><span class="n">fb</span> <span class="o">=</span> <span class="n">alfred</span><span class="o">.</span><span class="n">feedback</span>
<span class="n">fb</span><span class="o">.</span><span class="n">add_item</span><span class="p">(</span><span class="ss">:uid</span>          <span class="o">=&gt;</span> <span class="s2">"uid"</span>          <span class="p">,</span>
            <span class="ss">:arg</span>          <span class="o">=&gt;</span> <span class="s2">"arg"</span>          <span class="p">,</span>
            <span class="ss">:autocomplete</span> <span class="o">=&gt;</span> <span class="s2">"autocomplete"</span> <span class="p">,</span>
            <span class="ss">:title</span>        <span class="o">=&gt;</span> <span class="s2">"Title"</span>        <span class="p">,</span>
            <span class="ss">:subtitle</span>     <span class="o">=&gt;</span> <span class="s2">"Subtitle"</span>     <span class="p">,</span>
            <span class="ss">:match?</span>       <span class="o">=&gt;</span> <span class="ss">:all_title_match?</span><span class="p">)</span>

<span class="n">fb</span><span class="o">.</span><span class="n">add_file_item</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">expand_path</span> <span class="s2">"~/Applications/"</span><span class="p">,</span> <span class="ss">:match?</span> <span class="o">=&gt;</span> <span class="ss">:all_title_match?</span><span class="p">)</span>
</pre></div>

<p><code>:title_match?</code> and <code>:all_title_match?</code> are built in.</p>

<p>To define your new matcher</p>

<div class="highlight highlight-ruby"><pre><span class="no">Module</span> <span class="no">Alfred</span>
  <span class="k">class</span> <span class="nc">Feedback</span>
    <span class="k">class</span> <span class="nc">Item</span>
      <span class="c1"># define new matcher function here</span>
      <span class="k">def</span> <span class="nf">your_match?</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">return</span> <span class="kp">true</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>

<p>Check the code in <a href="https://github.com/zhaocai/alfred-workflow/blob/master/lib/alfred/feedback/item.rb#L63">alfred/feedback/item.rb</a> for more information.</p>

<h2>
<a name="troubleshooting" class="anchor" href="#troubleshooting"><span class="octicon octicon-link"></span></a>Troubleshooting</h2>

<h2>
<a name="developers" class="anchor" href="#developers"><span class="octicon octicon-link"></span></a>DEVELOPERS:</h2>

<p>After checking out the source, run:</p>

<p>$ rake newb</p>

<p>This task will install any missing dependencies, run the tests/specs,
and generate the RDoc.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>LICENSE:</h2>

<p>Copyright (c) 2013 Zhao Cai <a href="mailto:caizhaoff@gmail.com">caizhaoff@gmail.com</a></p>

<p>This program is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with
this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Alfred-workflow maintained by <a href="https://github.com/zhaocai">zhaocai</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
